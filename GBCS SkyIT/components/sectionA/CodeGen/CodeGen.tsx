import React, {useState} from "react";
import {IoMdCopy} from "react-icons/io";

const characters = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";

export default function GenerateCode() {
    const [code, setCode] = useState("");

    const generateRandomString = () => {
        return Array.from({length: 16}, () => characters.charAt(Math.floor(Math.random() * characters.length))).join(
            ""
        );
    };

    const handleGenerateCode = () => {
        const newCode = generateRandomString();
        setCode(newCode);
    };

    const handleCopyCode = () => {
        if (code) {
            navigator.clipboard.writeText(code);
            alert("code has been copied");
        }
    };

    return (
        <div className="text-white w-558 font-bold">
            <div className="flex flex-col items-start">
                <div className="font-poppins text-25 ml-2">Generate Authorization Code</div>
                <div className="flex pt-12 w-full ">
                    <svg
                        className="hover:bg-gray-700 rounded-lg"
                        width="162"
                        height="38"
                        viewBox="0 0 162 42"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                        onClick={handleGenerateCode}
                    >
                        <rect
                            x="1.5"
                            y="1.5"
                            width="159"
                            height="39"
                            rx="13.5"
                            stroke="url(#paint0_linear_9186_8392)"
                            strokeWidth="3"
                        />
                        <path
                            d="M35.125 17.625C34.6417 16.6083 33.9417 15.825 33.025 15.275C32.1083 14.7083 31.0417 14.425 29.825 14.425C28.6083 14.425 27.5083 14.7083 26.525 15.275C25.5583 15.825 24.7917 16.625 24.225 17.675C23.675 18.7083 23.4 19.9083 23.4 21.275C23.4 22.6417 23.675 23.8417 24.225 24.875C24.7917 25.9083 25.5583 26.7083 26.525 27.275C27.5083 27.825 28.6083 28.1 29.825 28.1C31.525 28.1 32.925 27.5917 34.025 26.575C35.125 25.5583 35.7667 24.1833 35.95 22.45H29V20.6H38.375V22.35C38.2417 23.7833 37.7917 25.1 37.025 26.3C36.2583 27.4833 35.25 28.425 34 29.125C32.75 29.8083 31.3583 30.15 29.825 30.15C28.2083 30.15 26.7333 29.775 25.4 29.025C24.0667 28.2583 23.0083 27.2 22.225 25.85C21.4583 24.5 21.075 22.975 21.075 21.275C21.075 19.575 21.4583 18.05 22.225 16.7C23.0083 15.3333 24.0667 14.275 25.4 13.525C26.7333 12.7583 28.2083 12.375 29.825 12.375C31.675 12.375 33.3083 12.8333 34.725 13.75C36.1583 14.6667 37.2 15.9583 37.85 17.625H35.125ZM54.263 22.625C54.263 23.0583 54.238 23.5167 54.188 24H43.238C43.3213 25.35 43.7797 26.4083 44.613 27.175C45.463 27.925 46.488 28.3 47.688 28.3C48.6713 28.3 49.488 28.075 50.138 27.625C50.8047 27.1583 51.2713 26.5417 51.538 25.775H53.988C53.6213 27.0917 52.888 28.1667 51.788 29C50.688 29.8167 49.3213 30.225 47.688 30.225C46.388 30.225 45.2213 29.9333 44.188 29.35C43.1713 28.7667 42.3713 27.9417 41.788 26.875C41.2047 25.7917 40.913 24.5417 40.913 23.125C40.913 21.7083 41.1963 20.4667 41.763 19.4C42.3297 18.3333 43.1213 17.5167 44.138 16.95C45.1713 16.3667 46.3547 16.075 47.688 16.075C48.988 16.075 50.138 16.3583 51.138 16.925C52.138 17.4917 52.9047 18.275 53.438 19.275C53.988 20.2583 54.263 21.375 54.263 22.625ZM51.913 22.15C51.913 21.2833 51.7213 20.5417 51.338 19.925C50.9547 19.2917 50.4297 18.8167 49.763 18.5C49.113 18.1667 48.388 18 47.588 18C46.438 18 45.4547 18.3667 44.638 19.1C43.838 19.8333 43.3797 20.85 43.263 22.15H51.913ZM60.4209 18.175V26.25C60.4209 26.9167 60.5626 27.3917 60.8459 27.675C61.1293 27.9417 61.6209 28.075 62.3209 28.075H63.9959V30H61.9459C60.6793 30 59.7293 29.7083 59.0959 29.125C58.4626 28.5417 58.1459 27.5833 58.1459 26.25V18.175H56.3709V16.3H58.1459V12.85H60.4209V16.3H63.9959V18.175H60.4209ZM73.3274 21.275C73.3274 19.575 73.7108 18.05 74.4774 16.7C75.2441 15.3333 76.2858 14.2667 77.6024 13.5C78.9358 12.7333 80.4108 12.35 82.0274 12.35C83.9274 12.35 85.5858 12.8083 87.0024 13.725C88.4191 14.6417 89.4524 15.9417 90.1024 17.625H87.3774C86.8941 16.575 86.1941 15.7667 85.2774 15.2C84.3774 14.6333 83.2941 14.35 82.0274 14.35C80.8108 14.35 79.7191 14.6333 78.7524 15.2C77.7858 15.7667 77.0274 16.575 76.4774 17.625C75.9274 18.6583 75.6524 19.875 75.6524 21.275C75.6524 22.6583 75.9274 23.875 76.4774 24.925C77.0274 25.9583 77.7858 26.7583 78.7524 27.325C79.7191 27.8917 80.8108 28.175 82.0274 28.175C83.2941 28.175 84.3774 27.9 85.2774 27.35C86.1941 26.7833 86.8941 25.975 87.3774 24.925H90.1024C89.4524 26.5917 88.4191 27.8833 87.0024 28.8C85.5858 29.7 83.9274 30.15 82.0274 30.15C80.4108 30.15 78.9358 29.775 77.6024 29.025C76.2858 28.2583 75.2441 27.2 74.4774 25.85C73.7108 24.5 73.3274 22.975 73.3274 21.275ZM99.8439 30.225C98.5606 30.225 97.3939 29.9333 96.3439 29.35C95.3106 28.7667 94.4939 27.9417 93.8939 26.875C93.3106 25.7917 93.0189 24.5417 93.0189 23.125C93.0189 21.725 93.3189 20.4917 93.9189 19.425C94.5356 18.3417 95.3689 17.5167 96.4189 16.95C97.4689 16.3667 98.6439 16.075 99.9439 16.075C101.244 16.075 102.419 16.3667 103.469 16.95C104.519 17.5167 105.344 18.3333 105.944 19.4C106.561 20.4667 106.869 21.7083 106.869 23.125C106.869 24.5417 106.552 25.7917 105.919 26.875C105.302 27.9417 104.461 28.7667 103.394 29.35C102.327 29.9333 101.144 30.225 99.8439 30.225ZM99.8439 28.225C100.661 28.225 101.427 28.0333 102.144 27.65C102.861 27.2667 103.436 26.6917 103.869 25.925C104.319 25.1583 104.544 24.225 104.544 23.125C104.544 22.025 104.327 21.0917 103.894 20.325C103.461 19.5583 102.894 18.9917 102.194 18.625C101.494 18.2417 100.736 18.05 99.9189 18.05C99.0856 18.05 98.3189 18.2417 97.6189 18.625C96.9356 18.9917 96.3856 19.5583 95.9689 20.325C95.5523 21.0917 95.3439 22.025 95.3439 23.125C95.3439 24.2417 95.5439 25.1833 95.9439 25.95C96.3606 26.7167 96.9106 27.2917 97.5939 27.675C98.2773 28.0417 99.0273 28.225 99.8439 28.225ZM109.39 23.1C109.39 21.7 109.673 20.475 110.24 19.425C110.807 18.3583 111.582 17.5333 112.565 16.95C113.565 16.3667 114.682 16.075 115.915 16.075C116.982 16.075 117.973 16.325 118.89 16.825C119.807 17.3083 120.507 17.95 120.99 18.75V11.5H123.29V30H120.99V27.425C120.54 28.2417 119.873 28.9167 118.99 29.45C118.107 29.9667 117.073 30.225 115.89 30.225C114.673 30.225 113.565 29.925 112.565 29.325C111.582 28.725 110.807 27.8833 110.24 26.8C109.673 25.7167 109.39 24.4833 109.39 23.1ZM120.99 23.125C120.99 22.0917 120.782 21.1917 120.365 20.425C119.948 19.6583 119.382 19.075 118.665 18.675C117.965 18.2583 117.19 18.05 116.34 18.05C115.49 18.05 114.715 18.25 114.015 18.65C113.315 19.05 112.757 19.6333 112.34 20.4C111.923 21.1667 111.715 22.0667 111.715 23.1C111.715 24.15 111.923 25.0667 112.34 25.85C112.757 26.6167 113.315 27.2083 114.015 27.625C114.715 28.025 115.49 28.225 116.34 28.225C117.19 28.225 117.965 28.025 118.665 27.625C119.382 27.2083 119.948 26.6167 120.365 25.85C120.782 25.0667 120.99 24.1583 120.99 23.125ZM140.015 22.625C140.015 23.0583 139.99 23.5167 139.94 24H128.99C129.073 25.35 129.531 26.4083 130.365 27.175C131.215 27.925 132.24 28.3 133.44 28.3C134.423 28.3 135.24 28.075 135.89 27.625C136.556 27.1583 137.023 26.5417 137.29 25.775H139.74C139.373 27.0917 138.64 28.1667 137.54 29C136.44 29.8167 135.073 30.225 133.44 30.225C132.14 30.225 130.973 29.9333 129.94 29.35C128.923 28.7667 128.123 27.9417 127.54 26.875C126.956 25.7917 126.665 24.5417 126.665 23.125C126.665 21.7083 126.948 20.4667 127.515 19.4C128.081 18.3333 128.873 17.5167 129.89 16.95C130.923 16.3667 132.106 16.075 133.44 16.075C134.74 16.075 135.89 16.3583 136.89 16.925C137.89 17.4917 138.656 18.275 139.19 19.275C139.74 20.2583 140.015 21.375 140.015 22.625ZM137.665 22.15C137.665 21.2833 137.473 20.5417 137.09 19.925C136.706 19.2917 136.181 18.8167 135.515 18.5C134.865 18.1667 134.14 18 133.34 18C132.19 18 131.206 18.3667 130.39 19.1C129.59 19.8333 129.131 20.85 129.015 22.15H137.665Z"
                            fill="url(#paint1_linear_9186_8392)"
                        />
                        <defs>
                            <linearGradient
                                id="paint0_linear_9186_8392"
                                x1="63.5696"
                                y1="-4.91772"
                                x2="72.3157"
                                y2="51.834"
                                gradientUnits="userSpaceOnUse"
                            >
                                <stop stopColor="#DEBF1A" />
                                <stop offset="0.408854" stopColor="#F2E28A" />
                                <stop offset="0.692708" stopColor="#CDB016" />
                                <stop offset="1" stopColor="#EDDA75" />
                            </linearGradient>
                            <linearGradient
                                id="paint1_linear_9186_8392"
                                x1="67.8734"
                                y1="6.18987"
                                x2="71.7033"
                                y2="38.9418"
                                gradientUnits="userSpaceOnUse"
                            >
                                <stop stopColor="#DEBF1A" />
                                <stop offset="0.408854" stopColor="#F2E28A" />
                                <stop offset="0.692708" stopColor="#CDB016" />
                                <stop offset="1" stopColor="#EDDA75" />
                            </linearGradient>
                        </defs>
                    </svg>

                    <div className="flex items-center ml-4 text-20">
                        <div className="bg-[#555555] flex justify-between items-center text-white border w-350 h-45 border-gray-500  rounded-xl px-2">
                            <div className="ml-2">{code || "Generate a new code"}</div>

                            <IoMdCopy
                                onClick={handleCopyCode}
                                className="w-32 h-32 text-yellow-300 cursor-pointer hover:text-yellow-600 "
                            />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    );
}
